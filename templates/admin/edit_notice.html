{% extends "base.html" %}
{% block title %}编辑通知 - 管理员{% endblock %}
{% block content %}
<link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/47.0.0/ckeditor5.css" />
<div class="container mt-4">
    <h2>编辑通知</h2>
    <form method="post">
        <div class="mb-3">
            <label for="title" class="form-label">通知标题</label>
            <input type="text" class="form-control" id="title" name="title" required value="{{ notice.title }}">
        </div>
        <div class="mb-3">
            <label for="content" class="form-label">通知内容</label>
            <textarea class="form-control" id="content" name="content" rows="8" required>{{ notice.content }}</textarea>
        </div>
        <div class="mb-3">
            <label for="lead_foot" class="form-label">引脚（可选）</label>
            <input type="text" class="form-control" id="lead_foot" name="lead_foot" value="{{ notice.lead_foot }}">
        </div>
        <button type="submit" class="btn btn-primary">保存修改</button>
        <a href="{{ url_for('admin.notices') }}" class="btn btn-secondary ms-2">返回</a>
    </form>
</div>

<script src="https://cdn.ckeditor.com/ckeditor5/41.4.2/classic/ckeditor.js"></script>
<script>
    // CKEditor 5的初始化方式（使用ClassicEditor.create）
    document.addEventListener('DOMContentLoaded', function() {
        ClassicEditor
            .create(document.querySelector('#content'), {
                // 配置项（对应你原来的需求）
                height: 350,  // 编辑器高度
                resizeEnabled: true  // 允许调整大小（CKEditor 5中属性名是驼峰式）
            })
            .then(editor => {
                console.log('CKEditor初始化成功', editor);
            })
            .catch(error => {
                console.error('CKEditor初始化失败：', error);  // 打印错误信息，方便调试
            });
    });
</script>
{% endblock %}

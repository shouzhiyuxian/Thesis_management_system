{% extends "base.html" %}

{% block title %}进程控制 - 毕业论文管理系统{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-cogs"></i> 进程控制</h2>
</div>

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>论文流程控制</h5>
                <small class="text-muted">通过开关控制各个流程模块的可用性</small>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="releasing_notices" 
                                   name="releasing_notices" 
                                   {% if process_status.releasing_notices == '1' %}checked{% endif %}>
                            <label class="form-check-label" for="releasing_notices">
                                <strong>发布通知</strong>
                                <small class="text-muted d-block">允许管理员和教师发布通知公告</small>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="complete_personal_data" 
                                   name="complete_personal_data" 
                                   {% if process_status.complete_personal_data == '1' %}checked{% endif %}>
                            <label class="form-check-label" for="complete_personal_data">
                                <strong>完善个人信息</strong>
                                <small class="text-muted d-block">允许学生完善个人资料信息</small>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="upload_paper_guide" 
                                   name="upload_paper_guide" 
                                   {% if process_status.upload_paper_guide == '1' %}checked{% endif %}>
                            <label class="form-check-label" for="upload_paper_guide">
                                <strong>上传论文指导资料</strong>
                                <small class="text-muted d-block">允许教师上传论文指导相关资料</small>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="upload_end_evaluate" 
                                   name="upload_end_evaluate" 
                                   {% if process_status.upload_end_evaluate == '1' %}checked{% endif %}>
                            <label class="form-check-label" for="upload_end_evaluate">
                                <strong>上传论文终稿</strong>
                                <small class="text-muted d-block">允许学生上传论文进行最终评估</small>
                            </label>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> 保存设置
                        </button>
                        <a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> 返回面板
                        </a>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card mt-4">
            <div class="card-header">
                <h6>当前状态说明</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>开启状态：</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check text-success"></i> 发布通知：{% if process_status.releasing_notices == '1' %}开启{% else %}关闭{% endif %}</li>
                            <li><i class="fas fa-check text-success"></i> 完善个人信息：{% if process_status.complete_personal_data == '1' %}开启{% else %}关闭{% endif %}</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>开启状态：</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check text-success"></i> 上传指导资料：{% if process_status.upload_paper_guide == '1' %}开启{% else %}关闭{% endif %}</li>
                            <li><i class="fas fa-check text-success"></i> 上传论文终稿：{% if process_status.upload_end_evaluate == '1' %}开启{% else %}关闭{% endif %}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
